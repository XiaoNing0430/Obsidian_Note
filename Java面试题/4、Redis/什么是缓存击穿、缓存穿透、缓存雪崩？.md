
# 缓存穿透

指缓存服务器中没有缓存数据，数据库中也没有符合条件的数据，导致业务系统每次都绕过缓存服务器查询下游数据库。

解决：
1. **缓存空值**
	- 可以为这些 key 对应的值设置为 null 并放到缓存中，这样再出现查询这个 key 的请求的时候，直接返回 null 即可
2. **布隆过滤器**
	- 可以将查询的数据条件都哈希到一个足够大的布隆过滤器中，用户发送的请求会先被布隆过滤器拦截，一定不存在的数据直接拦截返回了，从而避免下一步对数据库的压力。


# 缓存击穿

指当某一 key 的缓存过期时大量并发请求同时访问此 key，瞬间击穿缓存服务器直接访问数据库，让数据库处于负载的情况。

解决：
1. **异步定时更新**
	- 比如某个热点数据库的过期时间是1小时，那么每59分钟，通过定时任务去更新这个热点 key，并重新设置其过期时间
2. **互斥锁**
	- 在缓存处理上，通常使用一个互斥锁来解决缓存击穿的问题。简单来说就是当 Redis 中根据 key 获得的 value 值为空时，先锁上，然后从数据库加载，加载完毕，释放锁。若其他线程也在请求该 key时，发现获取锁失败，则先阻塞。


# 缓存雪崩

指当大量缓存同时过期或缓存服务宕机，所有请求都直接访问数据库，造成数据库高负载，影响性能，甚至宕机。

解决：
1. **不同的过期时间**
	- 为了避免大量的缓存在同一时间过期，可以把不同的 key 过期时间设置为不同的，并且通过定时刷新的方式更新过期时间。
2. **集群**
	- 在缓存雪崩问题的防治上，一个比较典型的技术就是采用集群方式部署，使用集群可以避免服务单点故障。