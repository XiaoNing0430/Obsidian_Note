
数据库死锁问题是指在多个并发事务中，彼此之间出现了相互等待的情况，导致所有事务都无法继续执行，称为死锁。


## 原因

1. 资源竞争
	- 多个事务试图同时访问相同的资源，如数据库表、行、页或锁。但是它们请求资源的顺序不同导致相互等待
2. 未释放资源
	- 事务在使用完资源后未及时释放资源，导致其他事务无法获取所需的资源。这可能是由于程序中的错误或异常情况引起的
3. 不同事务执行速度不同
	- 如果一个事务在获取资源后执行速度很慢，而其他事务需要等待该事务释放资源，那么可能会导致其他事务超时，从而发生死锁
4. 操作数据量过大
	- 在持有锁的同时，又请求获取更多的锁，导致相互等待

## 解决

1. 减少锁的数量
	- 比如使用 RC 来代替 RR 来避免因为 Gap锁 和 Next-key锁而带来的死锁情况
2. 减少锁的时长
	- 加快事务的执行速度，降低执行时间，也能减少死锁发生的概率
3. 固定顺序访问
	- 事务在访问同一张表时，应该以相同的顺序获取锁，可以避免死锁的发生
4. 减少操作的数据量
	- 尽量减少事务操作的数据量，尽量减少事务的持有时间，这样可以降低死锁的发生几率