
# MySQL 如何解决幻读问题？

InnoDB 中的 Repeatable Read 隔离级别通过 **MVCC + 间隙锁** 解决了大部分的幻读问题，但是并不是所有的幻读都能解决，要彻底解决幻读问题，需要使用 Serializable 隔离级别

Repeatable Read 中，通过 MVCC 机制，解决了快照读的幻读问题，Repeatable Read 的快照读，只有在第一次会进行数据查询，后面都是直接读取快照，所以不会发生幻读

Repeatable Read 中，通过 **间隙锁** 解决了部分当前读的幻读问题，通过增加间隙锁将记录之间的间隙锁住，避免新的数据


# MySQL 完全解决幻读问题了吗？如果没有，什么场景解决，什么场景没解决？

场景1：
如果两个事务，事务1先进行快照读，然后事务2插入了一条记录并提交，再在事务1中update 新插入的这条记录是可以更新成功的。发生了幻读

场景2：
如果两个事务，事务1先进行快照读，然后事务2插入了一条记录并提交，在事务1中进行了当前读之后，再进行快照读也会发生幻读